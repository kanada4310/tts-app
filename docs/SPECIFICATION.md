\# 機能仕様書



\## ユーザーフロー

1\. 画像アップロード（複数ページ対応）

2\. OCR処理（Gemini API） - 複数画像の場合は順次処理・結合

3\. テキスト確認・編集

4\. 音声生成（OpenAI TTS）

5\. 再生・速度調整・文ごとのナビゲーション



\## 機能詳細



\### 画像処理

\- **複数画像アップロード**: 最大10枚までの連続ページ対応

\- 自動圧縮: 長辺2000px、品質85%

\- 対応形式: JPEG, PNG

\- 最大サイズ: 各画像10MB



\### OCR

\- API: Gemini 2.5 Flash

\- 本文のみ抽出

\- 手書き・注釈除外

\- **複数画像対応**:
  \- 各画像を順次OCR処理
  \- ページ区切りとして改行を2つ挿入
  \- 最終的に1つのテキストに結合



\### TTS

\- API: OpenAI tts-1-hd

\- 速度: 1.0倍速で生成

\- フォーマット: Opus



\### 速度調整

\- 範囲: 0.5〜2.0倍

\- 実装: HTML5 Audio API

\- 音程維持（preservesPitch）



\### オーディオプレイヤー拡張機能

\- **文ごとのポーズ制御**:
  \- 各文の後に自動でポーズを挿入
  \- ポーズ秒数の設定（0-5秒、0.5秒刻み）
  \- ポーズ有効/無効の切り替え

\- **文ごとのナビゲーション**:
  \- 前の文/次の文へのスキップボタン
  \- シークバー上で文の境界を視覚的に表示
  \- シークバー上にカーソルを合わせると各文の先頭数単語（5-10単語）をツールチップで表示

\- **1文ごとリピート**:
  \- 特定の文を繰り返し再生
  \- リピート回数の設定

\- **キャッシュ（IndexedDB）**:
  \- 画像・音声のオフライン対応



\## 非機能要件

\- レスポンス時間: OCR 3秒以内、TTS 5秒以内

\- 対応ブラウザ: Chrome 90+, Safari 14+

\- PWA対応



\## 制約事項

\- 画像サイズ制限

\- API利用料（月$50想定）

\- オフライン時は保存済みのみ再生

